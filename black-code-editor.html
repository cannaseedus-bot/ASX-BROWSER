<!DOCTYPE html>
<html lang="en" data-theme="matrix">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BLACK CODE BROWSER ‚Äî ATOMIC ‚äó TAPE CMS ‚äó MX2DB</title>
    
    <!-- Atomic CSS Framework -->
    <style id="ATOMIC_CSS">
        :root {
            /* Core Palette */
            --bg-0: #020409;
            --bg-1: #050912;
            --bg-2: #071022;
            --panel: rgba(255,255,255,.045);
            --panel2: rgba(255,255,255,.06);
            --border: rgba(255,255,255,.14);
            --border-soft: rgba(255,255,255,.09);
            
            --fg-0: #eafff8;
            --fg-1: rgba(234,255,248,.78);
            --fg-2: rgba(234,255,248,.56);
            
            --accent: #16f2aa;
            --accent2: #61e7ff;
            --accent-soft: rgba(22,242,170,.14);
            
            --hazard: #ffb300;
            --hazard-soft: rgba(255,179,0,.14);
            
            --danger: #ff6b6b;
            --success: #00d9a6;
            --warning: #ffb300;
            
            /* Spacing */
            --s0: 0px; --s1: 4px; --s2: 8px; --s3: 12px; 
            --s4: 16px; --s5: 24px; --s6: 32px; --s7: 48px;
            
            /* Radius */
            --r0: 0px; --r1: 4px; --r2: 8px; --r3: 12px; --r4: 16px;
            
            /* Typography */
            --mono: ui-monospace, "Cascadia Code", "SFMono-Regular", Menlo, Consolas, monospace;
            --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
            --fs0: 11px; --fs1: 12px; --fs2: 13px; --fs3: 14px; 
            --fs4: 16px; --fs5: 18px; --fs6: 20px; --fs7: 24px;
            
            /* Shadow */
            --shadow-sm: 0 1px 3px rgba(0,0,0,.12);
            --shadow-md: 0 4px 12px rgba(0,0,0,.15);
            --shadow-lg: 0 8px 32px rgba(0,0,0,.2);
            --shadow-xl: 0 16px 48px rgba(0,0,0,.3);
            
            /* Animation */
            --transition: 150ms ease;
            --transition-slow: 300ms ease;
            
            /* Browser-specific */
            --tab-height: 42px;
            --sidebar-width: 280px;
            --topbar-height: 56px;
        }

        /* Theme variants */
        [data-theme="steam"] {
            --accent: #00adee;
            --accent2: #0099cc;
            --bg-0: #1b2838;
            --bg-1: #2a475e;
            --bg-2: #171a21;
        }
        
        [data-theme="chrome"] {
            --accent: #4285f4;
            --accent2: #34a853;
            --bg-0: #ffffff;
            --bg-1: #f8f9fa;
            --bg-2: #e8eaed;
            --fg-0: #202124;
            --fg-1: #5f6368;
            --border: #dadce0;
            --border-soft: #e8eaed;
        }
        
        [data-theme="matrix"] {
            --accent: #16f2aa;
            --accent2: #61e7ff;
        }
        
        [data-theme="dark"] {
            --accent: #8b5cf6;
            --accent2: #6366f1;
        }

        /* Reset */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; overflow: hidden; }
        body {
            background: var(--bg-0);
            color: var(--fg-0);
            font-family: var(--sans);
            font-size: var(--fs3);
            line-height: 1.5;
        }

        /* Atomic Utilities */
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .flex-row { flex-direction: row; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .flex-1 { flex: 1; }
        .flex-none { flex: none; }
        .gap-1 { gap: var(--s1); }
        .gap-2 { gap: var(--s2); }
        .gap-3 { gap: var(--s3); }
        .gap-4 { gap: var(--s4); }
        .gap-5 { gap: var(--s5); }
        .p-1 { padding: var(--s1); }
        .p-2 { padding: var(--s2); }
        .p-3 { padding: var(--s3); }
        .p-4 { padding: var(--s4); }
        .px-2 { padding-left: var(--s2); padding-right: var(--s2); }
        .px-3 { padding-left: var(--s3); padding-right: var(--s3); }
        .py-2 { padding-top: var(--s2); padding-bottom: var(--s2); }
        .w-full { width: 100%; }
        .h-full { height: 100%; }
        .overflow-hidden { overflow: hidden; }
        .overflow-auto { overflow: auto; }
        .relative { position: relative; }
        .absolute { position: absolute; }
        .fixed { position: fixed; }
        .inset-0 { top: 0; left: 0; right: 0; bottom: 0; }
        
        /* Custom Scrollbars */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { 
            background: var(--border-soft); 
            border-radius: 4px; 
        }
        ::-webkit-scrollbar-thumb:hover { background: var(--border); }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .animate-fadeIn { animation: fadeIn 0.3s ease; }
        .animate-pulse { animation: pulse 2s infinite; }
        .animate-spin { animation: spin 1s linear infinite; }
    </style>
    
    <!-- Browser UI CSS -->
    <style id="BROWSER_CSS">
        /* Main Layout */
        .browser-container {
            display: grid;
            grid-template-rows: var(--topbar-height) 1fr;
            height: 100vh;
            background: var(--bg-0);
        }
        
        /* Top Bar */
        .top-bar {
            background: var(--bg-1);
            border-bottom: 1px solid var(--border);
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            padding: 0 var(--s3);
            gap: var(--s3);
            backdrop-filter: blur(10px);
            z-index: 100;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: var(--s2);
            font-weight: 700;
            font-size: var(--fs5);
            color: var(--accent);
            user-select: none;
        }
        
        .logo-icon {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 12px;
            color: var(--bg-0);
        }
        
        /* Search Bar */
        .search-container {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
        }
        
        .search-bar {
            width: 100%;
            background: var(--bg-2);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 10px 48px 10px 44px;
            color: var(--fg-0);
            font-size: var(--fs3);
            transition: var(--transition);
        }
        
        .search-bar:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--accent-soft);
        }
        
        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--fg-2);
        }
        
        .search-actions {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: var(--s1);
        }
        
        /* Action Buttons */
        .btn {
            background: var(--panel);
            border: 1px solid var(--border);
            color: var(--fg-1);
            padding: 6px 12px;
            border-radius: var(--r2);
            cursor: pointer;
            font-size: var(--fs2);
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: var(--transition);
            user-select: none;
        }
        
        .btn:hover {
            background: var(--panel2);
            border-color: var(--border-soft);
            transform: translateY(-1px);
        }
        
        .btn-primary {
            background: var(--accent);
            border-color: var(--accent);
            color: var(--bg-0);
            font-weight: 600;
        }
        
        .btn-primary:hover {
            background: var(--accent2);
            border-color: var(--accent2);
        }
        
        .btn-sm {
            padding: 4px 8px;
            font-size: var(--fs1);
        }
        
        .btn-icon {
            padding: 6px;
            width: 32px;
            height: 32px;
            justify-content: center;
        }
        
        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: var(--sidebar-width) 1fr;
            height: calc(100vh - var(--topbar-height));
        }
        
        /* Sidebar */
        .sidebar {
            background: var(--bg-1);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .sidebar-header {
            padding: var(--s4);
            border-bottom: 1px solid var(--border-soft);
            font-weight: 600;
            color: var(--fg-1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-list {
            flex: 1;
            overflow-y: auto;
            padding: var(--s2) 0;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            gap: var(--s3);
            padding: var(--s3) var(--s4);
            color: var(--fg-1);
            text-decoration: none;
            transition: var(--transition);
            border-left: 3px solid transparent;
        }
        
        .nav-item:hover {
            background: var(--panel);
            color: var(--fg-0);
        }
        
        .nav-item.active {
            background: var(--panel);
            color: var(--accent);
            border-left-color: var(--accent);
        }
        
        .nav-item .icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Content Area */
        .content-area {
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        /* Tabs */
        .tab-bar {
            background: var(--bg-1);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            min-height: var(--tab-height);
            padding: 0 var(--s3);
            gap: var(--s2);
            overflow-x: auto;
            flex-shrink: 0;
        }
        
        .tab {
            display: flex;
            align-items: center;
            gap: var(--s2);
            padding: 8px 16px 8px 12px;
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: var(--r2);
            color: var(--fg-1);
            font-size: var(--fs2);
            cursor: pointer;
            transition: var(--transition);
            min-width: 120px;
            max-width: 200px;
            flex-shrink: 0;
        }
        
        .tab:hover {
            background: var(--panel2);
        }
        
        .tab.active {
            background: var(--bg-0);
            border-color: var(--accent);
            color: var(--accent);
            border-bottom: 2px solid var(--accent);
        }
        
        .tab-favicon {
            width: 16px;
            height: 16px;
            border-radius: 2px;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
        }
        
        .tab-close {
            margin-left: auto;
            opacity: 0.5;
            transition: var(--transition);
        }
        
        .tab-close:hover {
            opacity: 1;
            color: var(--danger);
        }
        
        .new-tab {
            padding: 8px;
            min-width: unset;
            max-width: unset;
            background: transparent;
            border: 1px dashed var(--border);
        }
        
        /* View Container */
        .view-container {
            flex: 1;
            overflow: hidden;
            position: relative;
        }
        
        .view {
            position: absolute;
            inset: 0;
            display: none;
            overflow: auto;
            animation: fadeIn 0.3s ease;
        }
        
        .view.active {
            display: block;
        }
        
        /* Dashboard View */
        .dashboard {
            padding: var(--s4);
            display: grid;
            gap: var(--s4);
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        }
        
        .card {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: var(--r3);
            padding: var(--s4);
            transition: var(--transition);
        }
        
        .card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--s3);
        }
        
        .card-title {
            font-weight: 600;
            color: var(--fg-0);
            font-size: var(--fs4);
        }
        
        .card-stats {
            font-size: var(--fs5);
            font-weight: 700;
            color: var(--accent);
        }
        
        .card-content {
            color: var(--fg-1);
            font-size: var(--fs2);
            line-height: 1.6;
        }
        
        /* Tape Browser View */
        .tape-browser {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .tape-toolbar {
            padding: var(--s4);
            background: var(--bg-1);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .tape-grid {
            flex: 1;
            padding: var(--s4);
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: var(--s4);
            overflow-y: auto;
        }
        
        .tape-item {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: var(--r3);
            padding: var(--s4);
            transition: var(--transition);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: var(--s2);
        }
        
        .tape-item:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .tape-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--r2);
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: var(--bg-0);
            margin-bottom: var(--s2);
        }
        
        .tape-title {
            font-weight: 600;
            color: var(--fg-0);
            font-size: var(--fs3);
        }
        
        .tape-meta {
            color: var(--fg-1);
            font-size: var(--fs1);
            display: flex;
            justify-content: space-between;
        }
        
        .tape-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            margin-top: var(--s2);
        }
        
        .tag {
            background: var(--accent-soft);
            color: var(--accent);
            padding: 2px 6px;
            border-radius: 10px;
            font-size: var(--fs0);
            font-weight: 500;
        }
        
        /* Editor View */
        .editor-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .editor-toolbar {
            padding: var(--s3);
            background: var(--bg-1);
            border-bottom: 1px solid var(--border);
            display: flex;
            gap: var(--s2);
            flex-wrap: wrap;
        }
        
        .editor-content {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr;
            overflow: hidden;
        }
        
        .editor {
            background: var(--bg-0);
            border: none;
            outline: none;
            padding: var(--s4);
            font-family: var(--mono);
            font-size: var(--fs2);
            line-height: 1.5;
            color: var(--fg-0);
            resize: none;
            overflow: auto;
        }
        
        .editor:focus {
            outline: none;
        }
        
        .editor-line-numbers {
            background: var(--bg-1);
            color: var(--fg-2);
            padding: var(--s4) var(--s2);
            font-family: var(--mono);
            font-size: var(--fs2);
            text-align: right;
            border-right: 1px solid var(--border);
            user-select: none;
        }
        
        /* Settings View */
        .settings-container {
            padding: var(--s4);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .settings-group {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: var(--r3);
            padding: var(--s4);
            margin-bottom: var(--s4);
        }
        
        .settings-title {
            font-weight: 600;
            color: var(--fg-0);
            margin-bottom: var(--s3);
            font-size: var(--fs4);
        }
        
        .setting {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--s3) 0;
            border-bottom: 1px solid var(--border-soft);
        }
        
        .setting:last-child {
            border-bottom: none;
        }
        
        .setting-label {
            color: var(--fg-1);
            font-size: var(--fs3);
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--border);
            transition: var(--transition);
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background: var(--bg-0);
            transition: var(--transition);
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background: var(--accent);
        }
        
        input:checked + .slider:before {
            transform: translateX(20px);
        }
        
        /* Status Bar */
        .status-bar {
            background: var(--bg-1);
            border-top: 1px solid var(--border);
            padding: 4px var(--s3);
            font-size: var(--fs1);
            color: var(--fg-1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 24px;
        }
        
        /* Loading States */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            gap: var(--s3);
            color: var(--fg-2);
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        /* Context Menu */
        .context-menu {
            position: absolute;
            background: var(--bg-2);
            border: 1px solid var(--border);
            border-radius: var(--r2);
            box-shadow: var(--shadow-xl);
            z-index: 1000;
            min-width: 160px;
            display: none;
        }
        
        .context-menu.show {
            display: block;
            animation: fadeIn 0.15s ease;
        }
        
        .context-item {
            padding: 8px 16px;
            color: var(--fg-1);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .context-item:hover {
            background: var(--panel);
            color: var(--fg-0);
        }
        
        .context-divider {
            height: 1px;
            background: var(--border);
            margin: 4px 0;
        }
        
        /* Modal */
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            backdrop-filter: blur(4px);
        }
        
        .modal.show {
            display: flex;
            animation: fadeIn 0.2s ease;
        }
        
        .modal-content {
            background: var(--bg-1);
            border: 1px solid var(--border);
            border-radius: var(--r3);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: var(--shadow-xl);
        }
        
        .modal-header {
            padding: var(--s4);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-weight: 600;
            color: var(--fg-0);
            font-size: var(--fs5);
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--fg-2);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: var(--transition);
        }
        
        .modal-close:hover {
            color: var(--danger);
            background: var(--panel);
        }
        
        .modal-body {
            padding: var(--s4);
            overflow-y: auto;
            max-height: calc(90vh - 140px);
        }
        
        .modal-footer {
            padding: var(--s4);
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: flex-end;
            gap: var(--s2);
        }
        
        /* Form Elements */
        .form-group {
            margin-bottom: var(--s4);
        }
        
        .form-label {
            display: block;
            margin-bottom: var(--s2);
            color: var(--fg-1);
            font-size: var(--fs2);
            font-weight: 500;
        }
        
        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 10px 12px;
            background: var(--bg-2);
            border: 1px solid var(--border);
            border-radius: var(--r2);
            color: var(--fg-0);
            font-family: inherit;
            font-size: var(--fs3);
            transition: var(--transition);
        }
        
        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--accent-soft);
        }
        
        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        /* Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: var(--fs0);
            font-weight: 600;
            border: 1px solid;
        }
        
        .badge-primary {
            background: var(--accent-soft);
            border-color: var(--accent);
            color: var(--accent);
        }
        
        .badge-success {
            background: rgba(0, 217, 166, 0.1);
            border-color: var(--success);
            color: var(--success);
        }
        
        .badge-warning {
            background: rgba(255, 179, 0, 0.1);
            border-color: var(--warning);
            color: var(--warning);
        }
        
        .badge-danger {
            background: rgba(255, 107, 107, 0.1);
            border-color: var(--danger);
            color: var(--danger);
        }
        
        /* Tooltip */
        [data-tooltip] {
            position: relative;
        }
        
        [data-tooltip]:before {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-2);
            color: var(--fg-0);
            padding: 6px 10px;
            border-radius: var(--r2);
            font-size: var(--fs1);
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            border: 1px solid var(--border);
            box-shadow: var(--shadow-md);
            z-index: 1000;
            margin-bottom: 8px;
        }
        
        [data-tooltip]:hover:before {
            opacity: 1;
            visibility: visible;
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: fixed;
                left: -280px;
                top: var(--topbar-height);
                bottom: 0;
                z-index: 100;
                transition: transform 0.3s ease;
            }
            
            .sidebar.show {
                transform: translateX(280px);
            }
            
            .sidebar-overlay {
                position: fixed;
                inset: 0;
                background: rgba(0,0,0,0.5);
                z-index: 99;
                display: none;
            }
            
            .sidebar-overlay.show {
                display: block;
            }
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .tape-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="browser-container">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="logo">
                <div class="logo-icon">‚üÅ</div>
                <span>BLACK CODE BROWSER</span>
            </div>
            
            <div class="search-container">
                <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="m21 21-4.35-4.35"/>
                </svg>
                <input type="text" class="search-bar" id="searchInput" placeholder="Search tapes, content, or enter API URL...">
                <div class="search-actions">
                    <button class="btn btn-icon btn-sm" id="searchButton" data-tooltip="Search">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="m21 21-4.35-4.35"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="flex items-center gap-2">
                <button class="btn btn-icon" id="sidebarToggle" data-tooltip="Toggle Sidebar">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="12" x2="21" y2="12"/>
                        <line x1="3" y1="6" x2="21" y2="6"/>
                        <line x1="3" y1="18" x2="21" y2="18"/>
                    </svg>
                </button>
                <button class="btn btn-icon" id="newTapeBtn" data-tooltip="New Tape">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M5 12h14"/>
                    </svg>
                </button>
                <button class="btn btn-icon" id="settingsBtn" data-tooltip="Settings">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                    </svg>
                </button>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar -->
            <div class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <span>Navigation</span>
                    <button class="btn btn-sm" id="collapseSidebar">¬´</button>
                </div>
                
                <div class="nav-list">
                    <a href="#" class="nav-item active" data-view="dashboard">
                        <div class="icon">üìä</div>
                        <span>Dashboard</span>
                    </a>
                    
                    <a href="#" class="nav-item" data-view="tapes">
                        <div class="icon">üìº</div>
                        <span>Tape Browser</span>
                        <span class="badge badge-primary" id="tapeCount">0</span>
                    </a>
                    
                    <a href="#" class="nav-item" data-view="editor">
                        <div class="icon">‚úèÔ∏è</div>
                        <span>Code Editor</span>
                    </a>
                    
                    <a href="#" class="nav-item" data-view="cms">
                        <div class="icon">üóÑÔ∏è</div>
                        <span>CMS Manager</span>
                    </a>
                    
                    <a href="#" class="nav-item" data-view="api">
                        <div class="icon">üîå</div>
                        <span>API Explorer</span>
                    </a>
                    
                    <a href="#" class="nav-item" data-view="files">
                        <div class="icon">üìÅ</div>
                        <span>File Manager</span>
                    </a>
                    
                    <a href="#" class="nav-item" data-view="database">
                        <div class="icon">üíæ</div>
                        <span>MX2DB</span>
                    </a>
                    
                    <a href="#" class="nav-item" data-view="compression">
                        <div class="icon">‚ö°</div>
                        <span>SCXQ2 Tools</span>
                    </a>
                    
                    <a href="#" class="nav-item" data-view="forum">
                        <div class="icon">üí¨</div>
                        <span>Community</span>
                    </a>
                </div>
                
                <div class="sidebar-footer p-4">
                    <div class="text-sm text-fg-2">Storage: <span id="storageUsed">0MB</span>/<span id="storageTotal">100MB</span></div>
                    <div class="w-full bg-bg-2 h-2 rounded-full mt-2 overflow-hidden">
                        <div class="bg-accent h-full" id="storageBar" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            
            <!-- Content Area -->
            <div class="content-area">
                <!-- Tab Bar -->
                <div class="tab-bar" id="tabBar">
                    <div class="tab active" data-tab="dashboard">
                        <div class="tab-favicon"></div>
                        <span>Dashboard</span>
                        <button class="tab-close">√ó</button>
                    </div>
                    <button class="tab new-tab" id="newTabBtn" data-tooltip="New Tab">+</button>
                </div>
                
                <!-- View Container -->
                <div class="view-container" id="viewContainer">
                    <!-- Dashboard View -->
                    <div class="view dashboard active" id="view-dashboard">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Tape Storage</div>
                                <div class="card-stats" id="totalTapes">0</div>
                            </div>
                            <div class="card-content">
                                Total compressed tape files in MX2DB storage
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">API Connections</div>
                                <div class="card-stats" id="apiConnections">0</div>
                            </div>
                            <div class="card-content">
                                Active API endpoints and data sources
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Compression Ratio</div>
                                <div class="card-stats" id="compressionRatio">0%</div>
                            </div>
                            <div class="card-content">
                                Average SCXQ2 compression efficiency
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Recent Activity</div>
                                <div class="card-stats" id="recentActivity">0</div>
                            </div>
                            <div class="card-content">
                                Last 24 hours of tape operations
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Community Posts</div>
                                <div class="card-stats" id="communityPosts">0</div>
                            </div>
                            <div class="card-content">
                                Active discussions in integrated forums
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">System Health</div>
                                <div class="badge badge-success" id="systemStatus">OK</div>
                            </div>
                            <div class="card-content">
                                All systems operational
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tape Browser View -->
                    <div class="view tape-browser" id="view-tapes">
                        <div class="tape-toolbar">
                            <div class="flex items-center gap-2">
                                <button class="btn btn-primary" id="uploadTapeBtn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="17 8 12 3 7 8"/>
                                        <line x1="12" y1="3" x2="12" y2="15"/>
                                    </svg>
                                    Upload Tape
                                </button>
                                <button class="btn" id="refreshTapesBtn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M23 4v6h-6"/>
                                        <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                                    </svg>
                                    Refresh
                                </button>
                            </div>
                            <div class="flex items-center gap-2">
                                <select class="form-select" id="tapeFilter" style="width: 120px;">
                                    <option value="all">All Tapes</option>
                                    <option value="json">JSON</option>
                                    <option value="xml">XML</option>
                                    <option value="html">HTML</option>
                                    <option value="css">CSS</option>
                                    <option value="js">JavaScript</option>
                                    <option value="compressed">Compressed</option>
                                </select>
                                <input type="text" class="form-input" id="tapeSearch" placeholder="Search tapes..." style="width: 200px;">
                            </div>
                        </div>
                        <div class="tape-grid" id="tapeGrid">
                            <!-- Tape items will be loaded here -->
                            <div class="loading">
                                <div class="loading-spinner"></div>
                                <div>Loading tapes...</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Editor View -->
                    <div class="view editor-container" id="view-editor">
                        <div class="editor-toolbar">
                            <button class="btn" id="saveEditorBtn">üíæ Save</button>
                            <button class="btn" id="formatEditorBtn">‚ú® Format</button>
                            <button class="btn" id="compressEditorBtn">‚ö° Compress</button>
                            <button class="btn" id="decompressEditorBtn">üîì Decompress</button>
                            <div class="flex-1"></div>
                            <select class="form-select" id="editorLanguage" style="width: 120px;">
                                <option value="html">HTML</option>
                                <option value="css">CSS</option>
                                <option value="javascript">JavaScript</option>
                                <option value="json">JSON</option>
                                <option value="xml">XML</option>
                                <option value="markdown">Markdown</option>
                            </select>
                        </div>
                        <div class="editor-content">
                            <textarea class="editor" id="codeEditor" placeholder="Start typing your code here..."></textarea>
                        </div>
                    </div>
                    
                    <!-- CMS Manager View -->
                    <div class="view" id="view-cms" style="padding: var(--s4);">
                        <h2 class="mb-4" style="font-size: var(--fs5); font-weight: 600;">CMS Manager</h2>
                        <div class="grid gap-4" style="grid-template-columns: 1fr 2fr;">
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">Content Types</div>
                                </div>
                                <div class="card-content">
                                    <div class="flex flex-col gap-2">
                                        <button class="btn" data-cms-type="forum">üí¨ Forum Posts</button>
                                        <button class="btn" data-cms-type="store">üõí Store Items</button>
                                        <button class="btn" data-cms-type="gallery">üñºÔ∏è Gallery</button>
                                        <button class="btn" data-cms-type="blog">üìù Blog</button>
                                        <button class="btn" data-cms-type="wiki">üìö Wiki</button>
                                        <button class="btn" data-cms-type="plugin">üîå Plugins</button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">CMS Configuration</div>
                                </div>
                                <div class="card-content">
                                    <div class="form-group">
                                        <label class="form-label">API Endpoint</label>
                                        <input type="text" class="form-input" id="cmsApi" placeholder="https://api.example.com/cms" value="https://your-supabase-url.com">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">API Key</label>
                                        <input type="password" class="form-input" id="cmsApiKey" placeholder="Enter API key">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Storage Backend</label>
                                        <select class="form-select" id="cmsStorage">
                                            <option value="mx2db">MX2DB (Local)</option>
                                            <option value="supabase">Supabase</option>
                                            <option value="jsonbin">JSONBin</option>
                                            <option value="custom">Custom API</option>
                                        </select>
                                    </div>
                                    <button class="btn btn-primary w-full mt-4" id="saveCmsConfig">Save Configuration</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- API Explorer View -->
                    <div class="view" id="view-api" style="padding: var(--s4);">
                        <h2 class="mb-4" style="font-size: var(--fs5); font-weight: 600;">API Explorer</h2>
                        <div class="grid gap-4" style="grid-template-columns: 1fr 1fr;">
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">API Endpoints</div>
                                </div>
                                <div class="card-content">
                                    <div id="apiEndpoints">
                                        <!-- API endpoints will be loaded here -->
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">Request Builder</div>
                                </div>
                                <div class="card-content">
                                    <div class="form-group">
                                        <label class="form-label">URL</label>
                                        <input type="text" class="form-input" id="apiUrl" placeholder="https://api.example.com/endpoint">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Method</label>
                                        <select class="form-select" id="apiMethod">
                                            <option value="GET">GET</option>
                                            <option value="POST">POST</option>
                                            <option value="PUT">PUT</option>
                                            <option value="DELETE">DELETE</option>
                                            <option value="PATCH">PATCH</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Headers</label>
                                        <textarea class="form-textarea" id="apiHeaders" rows="3" placeholder="Content-Type: application/json"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Body</label>
                                        <textarea class="form-textarea" id="apiBody" rows="6" placeholder="{&quot;key&quot;: &quot;value&quot;}"></textarea>
                                    </div>
                                    <button class="btn btn-primary w-full" id="sendApiRequest">Send Request</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card mt-4">
                            <div class="card-header">
                                <div class="card-title">Response</div>
                            </div>
                            <div class="card-content">
                                <pre id="apiResponse" style="font-family: var(--mono); font-size: var(--fs2); overflow: auto; max-height: 300px;">{
    "status": "Ready",
    "message": "Enter an API URL and click Send Request"
}</pre>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Status Bar -->
                <div class="status-bar">
                    <div id="statusMessage">Ready</div>
                    <div class="flex items-center gap-2">
                        <span id="connectionStatus">üü¢ Connected</span>
                        <span id="currentTime">--:--:--</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Mobile Sidebar Overlay -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>
    </div>
    
    <!-- Context Menu -->
    <div class="context-menu" id="contextMenu">
        <div class="context-item" data-action="open">Open</div>
        <div class="context-item" data-action="edit">Edit</div>
        <div class="context-item" data-action="compress">Compress</div>
        <div class="context-item" data-action="decompress">Decompress</div>
        <div class="context-divider"></div>
        <div class="context-item" data-action="rename">Rename</div>
        <div class="context-item" data-action="delete">Delete</div>
        <div class="context-divider"></div>
        <div class="context-item" data-action="properties">Properties</div>
    </div>
    
    <!-- New Tape Modal -->
    <div class="modal" id="newTapeModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Create New Tape</div>
                <button class="modal-close" id="closeNewTapeModal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Tape Name</label>
                    <input type="text" class="form-input" id="tapeName" placeholder="my-data.json" autofocus>
                </div>
                <div class="form-group">
                    <label class="form-label">Content Type</label>
                    <select class="form-select" id="tapeType">
                        <option value="json">JSON</option>
                        <option value="xml">XML</option>
                        <option value="html">HTML</option>
                        <option value="css">CSS</option>
                        <option value="javascript">JavaScript</option>
                        <option value="markdown">Markdown</option>
                        <option value="binary">Binary (Compressed)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Compression</label>
                    <select class="form-select" id="tapeCompression">
                        <option value="none">None</option>
                        <option value="scxq2">SCXQ2 (Recommended)</option>
                        <option value="gzip">GZIP</option>
                        <option value="brotli">Brotli</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Tags</label>
                    <input type="text" class="form-input" id="tapeTags" placeholder="cms, api, data, config">
                </div>
                <div class="form-group">
                    <label class="form-label">Initial Content</label>
                    <textarea class="form-textarea" id="tapeContent" rows="6" placeholder="Paste your content here or leave empty"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" id="cancelNewTape">Cancel</button>
                <button class="btn btn-primary" id="createNewTape">Create Tape</button>
            </div>
        </div>
    </div>
    
    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Settings</div>
                <button class="modal-close" id="closeSettingsModal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="settings-group">
                    <div class="settings-title">Appearance</div>
                    <div class="setting">
                        <div class="setting-label">Theme</div>
                        <select class="form-select" id="themeSelect" style="width: 120px;">
                            <option value="matrix">Matrix</option>
                            <option value="steam">Steam</option>
                            <option value="chrome">Chrome</option>
                            <option value="dark">Dark</option>
                        </select>
                    </div>
                    <div class="setting">
                        <div class="setting-label">Dark Mode</div>
                        <label class="switch">
                            <input type="checkbox" id="darkModeToggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting">
                        <div class="setting-label">Animations</div>
                        <label class="switch">
                            <input type="checkbox" id="animationsToggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="settings-group">
                    <div class="settings-title">Storage</div>
                    <div class="setting">
                        <div class="setting-label">Default Storage Limit</div>
                        <select class="form-select" id="storageLimit" style="width: 120px;">
                            <option value="100">100MB</option>
                            <option value="250">250MB</option>
                            <option value="500">500MB</option>
                            <option value="1000">1GB</option>
                            <option value="0">Unlimited</option>
                        </select>
                    </div>
                    <div class="setting">
                        <div class="setting-label">Auto-Compression</div>
                        <label class="switch">
                            <input type="checkbox" id="autoCompressionToggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting">
                        <div class="setting-label">Backup Interval</div>
                        <select class="form-select" id="backupInterval" style="width: 120px;">
                            <option value="0">Never</option>
                            <option value="3600">Hourly</option>
                            <option value="86400">Daily</option>
                            <option value="604800">Weekly</option>
                        </select>
                    </div>
                </div>
                
                <div class="settings-group">
                    <div class="settings-title">API Settings</div>
                    <div class="setting">
                        <div class="setting-label">Default API Timeout</div>
                        <select class="form-select" id="apiTimeout" style="width: 120px;">
                            <option value="5000">5 seconds</option>
                            <option value="10000">10 seconds</option>
                            <option value="30000">30 seconds</option>
                            <option value="60000">1 minute</option>
                        </select>
                    </div>
                    <div class="setting">
                        <div class="setting-label">Enable CORS</div>
                        <label class="switch">
                            <input type="checkbox" id="corsToggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting">
                        <div class="setting-label">Cache Responses</div>
                        <label class="switch">
                            <input type="checkbox" id="cacheToggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" id="cancelSettings">Cancel</button>
                <button class="btn btn-primary" id="saveSettings">Save Settings</button>
            </div>
        </div>
    </div>
    
    <!-- MX2DB Engine -->
    <script>
        // MX2DB - Minimal XML/JSON Database Engine
        class MX2DB {
            constructor() {
                this.dbName = 'black-code-browser';
                this.version = '1.0.0';
                this.storageLimit = 100 * 1024 * 1024; // 100MB default
                this.tapes = new Map();
                this.init();
            }
            
            async init() {
                // Load from localStorage or create new
                const saved = localStorage.getItem(this.dbName);
                if (saved) {
                    try {
                        const data = JSON.parse(saved);
                        this.tapes = new Map(data.tapes || []);
                        this.storageLimit = data.storageLimit || this.storageLimit;
                        console.log(`MX2DB loaded: ${this.tapes.size} tapes`);
                    } catch (e) {
                        console.error('Failed to load MX2DB:', e);
                        this.tapes = new Map();
                    }
                }
                
                // Calculate storage usage
                this.updateStorageStats();
            }
            
            updateStorageStats() {
                let totalSize = 0;
                for (const tape of this.tapes.values()) {
                    totalSize += tape.size || 0;
                }
                
                const used = Math.round(totalSize / 1024 / 1024 * 100) / 100;
                const total = Math.round(this.storageLimit / 1024 / 1024 * 100) / 100;
                const percent = Math.min(100, (totalSize / this.storageLimit) * 100);
                
                return { used, total, percent };
            }
            
            save() {
                const data = {
                    version: this.version,
                    storageLimit: this.storageLimit,
                    tapes: Array.from(this.tapes.entries())
                };
                
                try {
                    localStorage.setItem(this.dbName, JSON.stringify(data));
                    return true;
                } catch (e) {
                    console.error('Failed to save MX2DB:', e);
                    return false;
                }
            }
            
            createTape(name, content, type = 'json', tags = [], compression = 'none') {
                const id = Date.now().toString(36) + Math.random().toString(36).substr(2);
                const size = new Blob([content]).size;
                
                const tape = {
                    id,
                    name,
                    content,
                    type,
                    tags: Array.isArray(tags) ? tags : tags.split(',').map(t => t.trim()),
                    compression,
                    size,
                    created: Date.now(),
                    modified: Date.now(),
                    version: 1
                };
                
                this.tapes.set(id, tape);
                this.save();
                this.updateStorageStats();
                
                return tape;
            }
            
            getTape(id) {
                return this.tapes.get(id);
            }
            
            getAllTapes() {
                return Array.from(this.tapes.values()).sort((a, b) => b.modified - a.modified);
            }
            
            updateTape(id, updates) {
                const tape = this.tapes.get(id);
                if (!tape) return null;
                
                Object.assign(tape, updates, { modified: Date.now() });
                if (updates.content !== undefined) {
                    tape.size = new Blob([updates.content]).size;
                }
                
                this.tapes.set(id, tape);
                this.save();
                this.updateStorageStats();
                
                return tape;
            }
            
            deleteTape(id) {
                const deleted = this.tapes.delete(id);
                this.save();
                this.updateStorageStats();
                return deleted;
            }
            
            searchTapes(query) {
                query = query.toLowerCase();
                return this.getAllTapes().filter(tape => 
                    tape.name.toLowerCase().includes(query) ||
                    tape.tags.some(tag => tag.toLowerCase().includes(query)) ||
                    tape.content.toLowerCase().includes(query)
                );
            }
            
            filterTapes(type) {
                if (type === 'all') return this.getAllTapes();
                return this.getAllTapes().filter(tape => tape.type === type);
            }
            
            compressTape(id, algorithm = 'scxq2') {
                const tape = this.tapes.get(id);
                if (!tape) return null;
                
                // Mock compression - in real implementation, use actual compression
                tape.compression = algorithm;
                tape.compressedSize = Math.floor(tape.size * 0.7); // 30% compression
                tape.modified = Date.now();
                
                this.tapes.set(id, tape);
                this.save();
                
                return tape;
            }
            
            decompressTape(id) {
                const tape = this.tapes.get(id);
                if (!tape) return null;
                
                tape.compression = 'none';
                delete tape.compressedSize;
                tape.modified = Date.now();
                
                this.tapes.set(id, tape);
                this.save();
                
                return tape;
            }
            
            getStats() {
                const tapes = this.getAllTapes();
                const stats = {
                    totalTapes: tapes.length,
                    totalSize: tapes.reduce((sum, tape) => sum + (tape.size || 0), 0),
                    byType: {},
                    byCompression: {},
                    recentActivity: tapes.filter(t => Date.now() - t.modified < 86400000).length
                };
                
                tapes.forEach(tape => {
                    stats.byType[tape.type] = (stats.byType[tape.type] || 0) + 1;
                    stats.byCompression[tape.compression] = (stats.byCompression[tape.compression] || 0) + 1;
                });
                
                return stats;
            }
            
            exportDatabase() {
                return JSON.stringify({
                    version: this.version,
                    exported: Date.now(),
                    tapes: this.getAllTapes()
                }, null, 2);
            }
            
            importDatabase(data) {
                try {
                    const imported = JSON.parse(data);
                    if (imported.version && imported.tapes) {
                        imported.tapes.forEach(tape => {
                            this.tapes.set(tape.id, tape);
                        });
                        this.save();
                        return true;
                    }
                } catch (e) {
                    console.error('Failed to import database:', e);
                }
                return false;
            }
        }
        
        // SCXQ2 Compression Utilities
        class SCXQ2 {
            static async compress(data) {
                // Mock compression - in a real implementation, use actual compression
                return new Promise(resolve => {
                    setTimeout(() => {
                        const compressed = btoa(unescape(encodeURIComponent(data)));
                        resolve({
                            compressed,
                            originalSize: data.length,
                            compressedSize: compressed.length,
                            ratio: (compressed.length / data.length).toFixed(2)
                        });
                    }, 100);
                });
            }
            
            static async decompress(compressed) {
                // Mock decompression
                return new Promise(resolve => {
                    setTimeout(() => {
                        try {
                            const decompressed = decodeURIComponent(escape(atob(compressed)));
                            resolve(decompressed);
                        } catch (e) {
                            resolve('Decompression failed');
                        }
                    }, 100);
                });
            }
        }
        
        // API Manager
        class APIManager {
            constructor() {
                this.endpoints = new Map();
                this.cache = new Map();
                this.timeout = 10000;
                this.loadEndpoints();
            }
            
            loadEndpoints() {
                // Default endpoints
                this.endpoints.set('jsonplaceholder', {
                    name: 'JSONPlaceholder',
                    url: 'https://jsonplaceholder.typicode.com',
                    description: 'Fake REST API for testing'
                });
                
                this.endpoints.set('mockapi', {
                    name: 'MockAPI',
                    url: 'https://mockapi.io',
                    description: 'Mock API service'
                });
                
                this.endpoints.set('local', {
                    name: 'Local MX2DB',
                    url: 'mx2db://local',
                    description: 'Local tape database'
                });
                
                // Load saved endpoints
                const saved = localStorage.getItem('api-endpoints');
                if (saved) {
                    try {
                        const endpoints = JSON.parse(saved);
                        endpoints.forEach(ep => {
                            this.endpoints.set(ep.id, ep);
                        });
                    } catch (e) {
                        console.error('Failed to load endpoints:', e);
                    }
                }
            }
            
            saveEndpoints() {
                const endpoints = Array.from(this.endpoints.values());
                localStorage.setItem('api-endpoints', JSON.stringify(endpoints));
            }
            
            async request(url, method = 'GET', headers = {}, body = null) {
                const startTime = Date.now();
                const cacheKey = `${method}:${url}:${JSON.stringify(body)}`;
                
                // Check cache
                if (method === 'GET' && this.cache.has(cacheKey)) {
                    const cached = this.cache.get(cacheKey);
                    if (Date.now() - cached.timestamp < 300000) { // 5 minutes
                        return cached.data;
                    }
                }
                
                try {
                    const options = {
                        method,
                        headers: {
                            'Content-Type': 'application/json',
                            ...headers
                        },
                        signal: AbortSignal.timeout(this.timeout)
                    };
                    
                    if (body && (method === 'POST' || method === 'PUT' || method === 'PATCH')) {
                        options.body = JSON.stringify(body);
                    }
                    
                    const response = await fetch(url, options);
                    const data = await response.json();
                    
                    const result = {
                        status: response.status,
                        statusText: response.statusText,
                        headers: Object.fromEntries(response.headers.entries()),
                        data,
                        time: Date.now() - startTime,
                        size: JSON.stringify(data).length
                    };
                    
                    // Cache GET requests
                    if (method === 'GET') {
                        this.cache.set(cacheKey, {
                            data: result,
                            timestamp: Date.now()
                        });
                    }
                    
                    return result;
                } catch (error) {
                    return {
                        error: error.message,
                        time: Date.now() - startTime
                    };
                }
            }
            
            addEndpoint(endpoint) {
                const id = endpoint.id || Date.now().toString(36);
                this.endpoints.set(id, { ...endpoint, id });
                this.saveEndpoints();
                return id;
            }
            
            removeEndpoint(id) {
                this.endpoints.delete(id);
                this.saveEndpoints();
            }
            
            getEndpoints() {
                return Array.from(this.endpoints.values());
            }
        }
        
        // Main Application
        class BlackCodeBrowser {
            constructor() {
                this.db = new MX2DB();
                this.api = new APIManager();
                this.currentView = 'dashboard';
                this.currentTab = 'dashboard';
                this.settings = this.loadSettings();
                this.init();
            }
            
            loadSettings() {
                const defaultSettings = {
                    theme: 'matrix',
                    darkMode: true,
                    animations: true,
                    storageLimit: 100,
                    autoCompression: true,
                    backupInterval: 86400,
                    apiTimeout: 10000,
                    cors: true,
                    cache: true
                };
                
                const saved = localStorage.getItem('browser-settings');
                return saved ? { ...defaultSettings, ...JSON.parse(saved) } : defaultSettings;
            }
            
            saveSettings() {
                localStorage.setItem('browser-settings', JSON.stringify(this.settings));
                this.applySettings();
            }
            
            applySettings() {
                // Apply theme
                document.documentElement.setAttribute('data-theme', this.settings.theme);
                
                // Apply dark mode
                if (this.settings.darkMode) {
                    document.documentElement.style.setProperty('--bg-0', '#020409');
                    document.documentElement.style.setProperty('--bg-1', '#050912');
                    document.documentElement.style.setProperty('--bg-2', '#071022');
                    document.documentElement.style.setProperty('--fg-0', '#eafff8');
                } else {
                    document.documentElement.style.setProperty('--bg-0', '#ffffff');
                    document.documentElement.style.setProperty('--bg-1', '#f8f9fa');
                    document.documentElement.style.setProperty('--bg-2', '#e8eaed');
                    document.documentElement.style.setProperty('--fg-0', '#202124');
                }
                
                // Apply API settings
                this.api.timeout = this.settings.apiTimeout;
            }
            
            async init() {
                this.applySettings();
                this.setupEventListeners();
                this.updateDashboard();
                this.loadTapes();
                this.updateStatusBar();
                this.startClock();
                
                // Create some sample tapes if empty
                if (this.db.getAllTapes().length === 0) {
                    this.createSampleTapes();
                }
            }
            
            setupEventListeners() {
                // Navigation
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        const view = item.dataset.view;
                        this.switchView(view);
                        document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                        item.classList.add('active');
                    });
                });
                
                // Search
                document.getElementById('searchInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.performSearch(e.target.value);
                    }
                });
                
                document.getElementById('searchButton').addEventListener('click', () => {
                    const query = document.getElementById('searchInput').value;
                    this.performSearch(query);
                });
                
                // Tabs
                document.querySelectorAll('.tab').forEach(tab => {
                    if (!tab.classList.contains('new-tab')) {
                        tab.addEventListener('click', (e) => {
                            if (!e.target.classList.contains('tab-close')) {
                                const tabId = tab.dataset.tab;
                                this.switchTab(tabId);
                            }
                        });
                        
                        tab.querySelector('.tab-close').addEventListener('click', (e) => {
                            e.stopPropagation();
                            this.closeTab(tab.dataset.tab);
                        });
                    }
                });
                
                document.getElementById('newTabBtn').addEventListener('click', () => {
                    this.createNewTab();
                });
                
                // Tape management
                document.getElementById('newTapeBtn').addEventListener('click', () => {
                    this.showNewTapeModal();
                });
                
                document.getElementById('uploadTapeBtn').addEventListener('click', () => {
                    this.uploadTape();
                });
                
                document.getElementById('refreshTapesBtn').addEventListener('click', () => {
                    this.loadTapes();
                });
                
                document.getElementById('tapeFilter').addEventListener('change', () => {
                    this.filterTapes();
                });
                
                document.getElementById('tapeSearch').addEventListener('input', () => {
                    this.searchTapes();
                });
                
                // Editor
                document.getElementById('saveEditorBtn').addEventListener('click', () => {
                    this.saveEditorContent();
                });
                
                document.getElementById('formatEditorBtn').addEventListener('click', () => {
                    this.formatEditorContent();
                });
                
                document.getElementById('compressEditorBtn').addEventListener('click', async () => {
                    await this.compressEditorContent();
                });
                
                document.getElementById('decompressEditorBtn').addEventListener('click', async () => {
                    await this.decompressEditorContent();
                });
                
                document.getElementById('editorLanguage').addEventListener('change', (e) => {
                    this.updateEditorLanguage(e.target.value);
                });
                
                // CMS
                document.getElementById('saveCmsConfig').addEventListener('click', () => {
                    this.saveCmsConfig();
                });
                
                // API
                document.getElementById('sendApiRequest').addEventListener('click', async () => {
                    await this.sendApiRequest();
                });
                
                // Settings
                document.getElementById('settingsBtn').addEventListener('click', () => {
                    this.showSettingsModal();
                });
                
                document.getElementById('saveSettings').addEventListener('click', () => {
                    this.saveSettingsFromModal();
                });
                
                // Sidebar
                document.getElementById('sidebarToggle').addEventListener('click', () => {
                    this.toggleSidebar();
                });
                
                document.getElementById('collapseSidebar').addEventListener('click', () => {
                    this.toggleSidebar();
                });
                
                document.getElementById('sidebarOverlay').addEventListener('click', () => {
                    this.toggleSidebar();
                });
                
                // Modal controls
                document.getElementById('closeNewTapeModal').addEventListener('click', () => {
                    this.hideModal('newTapeModal');
                });
                
                document.getElementById('cancelNewTape').addEventListener('click', () => {
                    this.hideModal('newTapeModal');
                });
                
                document.getElementById('createNewTape').addEventListener('click', () => {
                    this.createTapeFromModal();
                });
                
                document.getElementById('closeSettingsModal').addEventListener('click', () => {
                    this.hideModal('settingsModal');
                });
                
                document.getElementById('cancelSettings').addEventListener('click', () => {
                    this.hideModal('settingsModal');
                });
                
                // Context menu
                document.addEventListener('click', () => {
                    this.hideContextMenu();
                });
                
                document.addEventListener('contextmenu', (e) => {
                    if (e.target.closest('.tape-item')) {
                        e.preventDefault();
                        this.showContextMenu(e, e.target.closest('.tape-item'));
                    }
                });
                
                // Load API endpoints
                this.loadApiEndpoints();
            }
            
            switchView(view) {
                this.currentView = view;
                document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
                document.getElementById(`view-${view}`).classList.add('active');
                this.updateStatusBar(`Switched to ${view}`);
            }
            
            switchTab(tabId) {
                this.currentTab = tabId;
                document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
                document.querySelector(`.tab[data-tab="${tabId}"]`).classList.add('active');
                this.switchView(tabId);
            }
            
            createNewTab() {
                const tabId = `tab-${Date.now()}`;
                const tabName = 'New Tab';
                
                const tab = document.createElement('div');
                tab.className = 'tab';
                tab.dataset.tab = tabId;
                tab.innerHTML = `
                    <div class="tab-favicon"></div>
                    <span>${tabName}</span>
                    <button class="tab-close">√ó</button>
                `;
                
                const newTabBtn = document.getElementById('newTabBtn');
                newTabBtn.parentNode.insertBefore(tab, newTabBtn);
                
                // Add event listeners
                tab.addEventListener('click', (e) => {
                    if (!e.target.classList.contains('tab-close')) {
                        this.switchTab(tabId);
                    }
                });
                
                tab.querySelector('.tab-close').addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.closeTab(tabId);
                });
                
                this.switchTab(tabId);
            }
            
            closeTab(tabId) {
                if (tabId === 'dashboard') return; // Can't close dashboard
        
                const tab = document.querySelector(`.tab[data-tab="${tabId}"]`);
                if (tab) {
                    tab.remove();
                    
                    // Switch to another tab
                    const remainingTabs = document.querySelectorAll('.tab:not(.new-tab)');
                    if (remainingTabs.length > 0) {
                        const nextTab = remainingTabs[0].dataset.tab;
                        this.switchTab(nextTab);
                    } else {
                        this.switchTab('dashboard');
                    }
                }
            }
            
            updateDashboard() {
                const stats = this.db.getStats();
                const storage = this.db.updateStorageStats();
                
                document.getElementById('totalTapes').textContent = stats.totalTapes;
                document.getElementById('tapeCount').textContent = stats.totalTapes;
                document.getElementById('apiConnections').textContent = this.api.getEndpoints().length;
                document.getElementById('compressionRatio').textContent = '70%'; // Mock
                document.getElementById('recentActivity').textContent = stats.recentActivity;
                document.getElementById('communityPosts').textContent = '0'; // Mock
                document.getElementById('systemStatus').textContent = 'OK';
                
                document.getElementById('storageUsed').textContent = `${storage.used}MB`;
                document.getElementById('storageTotal').textContent = `${storage.total}MB`;
                document.getElementById('storageBar').style.width = `${storage.percent}%`;
            }
            
            async loadTapes() {
                const tapes = this.db.getAllTapes();
                const grid = document.getElementById('tapeGrid');
                
                if (tapes.length === 0) {
                    grid.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: var(--s7); color: var(--fg-2);">
                            <div style="font-size: 48px; margin-bottom: var(--s3);">üìº</div>
                            <h3 style="margin-bottom: var(--s2);">No Tapes Found</h3>
                            <p style="margin-bottom: var(--s4);">Create your first tape to get started</p>
                            <button class="btn btn-primary" id="createFirstTape">Create First Tape</button>
                        </div>
                    `;
                    
                    document.getElementById('createFirstTape')?.addEventListener('click', () => {
                        this.showNewTapeModal();
                    });
                    
                    return;
                }
                
                grid.innerHTML = '';
                tapes.forEach(tape => {
                    const item = document.createElement('div');
                    item.className = 'tape-item';
                    item.dataset.id = tape.id;
                    
                    const icon = this.getTypeIcon(tape.type);
                    const size = this.formatSize(tape.size);
                    const date = new Date(tape.modified).toLocaleDateString();
                    
                    item.innerHTML = `
                        <div class="tape-icon">${icon}</div>
                        <div class="tape-title">${tape.name}</div>
                        <div class="tape-meta">
                            <span>${size}</span>
                            <span>${date}</span>
                        </div>
                        <div class="tape-tags">
                            ${tape.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                    `;
                    
                    item.addEventListener('click', () => {
                        this.openTape(tape.id);
                    });
                    
                    grid.appendChild(item);
                });
            }
            
            getTypeIcon(type) {
                const icons = {
                    'json': '{}',
                    'xml': '</>',
                    'html': 'üåê',
                    'css': 'üé®',
                    'javascript': '‚ö°',
                    'markdown': 'üìù',
                    'binary': 'üì¶'
                };
                return icons[type] || 'üìÑ';
            }
            
            formatSize(bytes) {
                if (bytes < 1024) return bytes + 'B';
                if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + 'KB';
                return (bytes / (1024 * 1024)).toFixed(1) + 'MB';
            }
            
            filterTapes() {
                const type = document.getElementById('tapeFilter').value;
                const tapes = type === 'all' ? this.db.getAllTapes() : this.db.filterTapes(type);
                this.renderTapes(tapes);
            }
            
            searchTapes() {
                const query = document.getElementById('tapeSearch').value;
                if (query.trim() === '') {
                    this.filterTapes();
                    return;
                }
                
                const tapes = this.db.searchTapes(query);
                this.renderTapes(tapes);
            }
            
            renderTapes(tapes) {
                const grid = document.getElementById('tapeGrid');
                grid.innerHTML = '';
                
                if (tapes.length === 0) {
                    grid.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: var(--s7); color: var(--fg-2);">
                            <div style="font-size: 48px; margin-bottom: var(--s3);">üîç</div>
                            <h3>No matching tapes</h3>
                        </div>
                    `;
                    return;
                }
                
                tapes.forEach(tape => {
                    const item = document.createElement('div');
                    item.className = 'tape-item';
                    item.dataset.id = tape.id;
                    
                    const icon = this.getTypeIcon(tape.type);
                    const size = this.formatSize(tape.size);
                    const date = new Date(tape.modified).toLocaleDateString();
                    
                    item.innerHTML = `
                        <div class="tape-icon">${icon}</div>
                        <div class="tape-title">${tape.name}</div>
                        <div class="tape-meta">
                            <span>${size}</span>
                            <span>${date}</span>
                        </div>
                        <div class="tape-tags">
                            ${tape.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                    `;
                    
                    item.addEventListener('click', () => {
                        this.openTape(tape.id);
                    });
                    
                    grid.appendChild(item);
                });
            }
            
            openTape(id) {
                const tape = this.db.getTape(id);
                if (!tape) return;
                
                // Switch to editor view
                this.switchView('editor');
                document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                document.querySelector('.nav-item[data-view="editor"]').classList.add('active');
                
                // Load content into editor
                const editor = document.getElementById('codeEditor');
                editor.value = tape.content;
                document.getElementById('editorLanguage').value = tape.type;
                
                this.updateStatusBar(`Opened tape: ${tape.name}`);
            }
            
            showNewTapeModal() {
                this.showModal('newTapeModal');
                document.getElementById('tapeName').focus();
            }
            
            async createTapeFromModal() {
                const name = document.getElementById('tapeName').value.trim();
                const type = document.getElementById('tapeType').value;
                const compression = document.getElementById('tapeCompression').value;
                const tags = document.getElementById('tapeTags').value;
                const content = document.getElementById('tapeContent').value;
                
                if (!name) {
                    alert('Please enter a tape name');
                    return;
                }
                
                let finalContent = content;
                if (compression === 'scxq2' && content) {
                    const result = await SCXQ2.compress(content);
                    finalContent = result.compressed;
                }
                
                const tape = this.db.createTape(name, finalContent, type, tags, compression);
                
                this.hideModal('newTapeModal');
                this.loadTapes();
                this.updateDashboard();
                this.updateStatusBar(`Created tape: ${name}`);
                
                // Clear form
                document.getElementById('tapeName').value = '';
                document.getElementById('tapeContent').value = '';
            }
            
            uploadTape() {
                // Create a file input
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json,.xml,.html,.css,.js,.txt,.md';
                input.multiple = true;
                
                input.onchange = async (e) => {
                    const files = Array.from(e.target.files);
                    for (const file of files) {
                        const content = await file.text();
                        const name = file.name;
                        const type = this.getFileType(name);
                        
                        this.db.createTape(name, content, type, ['uploaded']);
                    }
                    
                    this.loadTapes();
                    this.updateDashboard();
                    this.updateStatusBar(`Uploaded ${files.length} file(s)`);
                };
                
                input.click();
            }
            
            getFileType(filename) {
                const ext = filename.split('.').pop().toLowerCase();
                const types = {
                    'json': 'json',
                    'xml': 'xml',
                    'html': 'html',
                    'htm': 'html',
                    'css': 'css',
                    'js': 'javascript',
                    'md': 'markdown',
                    'txt': 'text'
                };
                return types[ext] || 'binary';
            }
            
            saveEditorContent() {
                const content = document.getElementById('codeEditor').value;
                const type = document.getElementById('editorLanguage').value;
                
                // For now, create a new tape
                const name = `editor-${Date.now()}.${type}`;
                this.db.createTape(name, content, type, ['editor']);
                
                this.updateStatusBar('Content saved as new tape');
            }
            
            async compressEditorContent() {
                const content = document.getElementById('codeEditor').value;
                if (!content.trim()) {
                    alert('Editor is empty');
                    return;
                }
                
                this.updateStatusBar('Compressing...');
                const result = await SCXQ2.compress(content);
                
                document.getElementById('codeEditor').value = result.compressed;
                document.getElementById('editorLanguage').value = 'binary';
                
                this.updateStatusBar(`Compressed: ${result.ratio} ratio`);
            }
            
            async decompressEditorContent() {
                const content = document.getElementById('codeEditor').value;
                if (!content.trim()) {
                    alert('Editor is empty');
                    return;
                }
                
                this.updateStatusBar('Decompressing...');
                const decompressed = await SCXQ2.decompress(content);
                
                document.getElementById('codeEditor').value = decompressed;
                document.getElementById('editorLanguage').value = 'text';
                
                this.updateStatusBar('Content decompressed');
            }
            
            formatEditorContent() {
                const content = document.getElementById('codeEditor').value;
                const type = document.getElementById('editorLanguage').value;
                
                try {
                    let formatted = content;
                    
                    if (type === 'json') {
                        formatted = JSON.stringify(JSON.parse(content), null, 2);
                    } else if (type === 'html' || type === 'xml') {
                        // Simple HTML/XML formatting
                        formatted = content
                            .replace(/>\s+</g, '>\n<')
                            .replace(/</g, '\n<')
                            .replace(/>/g, '>\n')
                            .split('\n')
                            .map(line => line.trim())
                            .filter(line => line)
                            .join('\n');
                    }
                    
                    document.getElementById('codeEditor').value = formatted;
                    this.updateStatusBar('Content formatted');
                } catch (e) {
                    alert('Formatting failed: ' + e.message);
                }
            }
            
            updateEditorLanguage(lang) {
                const editor = document.getElementById('codeEditor');
                editor.placeholder = `Start typing your ${lang.toUpperCase()} code here...`;
            }
            
            saveCmsConfig() {
                const api = document.getElementById('cmsApi').value;
                const storage = document.getElementById('cmsStorage').value;
                
                localStorage.setItem('cms-config', JSON.stringify({ api, storage }));
                this.updateStatusBar('CMS configuration saved');
            }
            
            loadApiEndpoints() {
                const container = document.getElementById('apiEndpoints');
                const endpoints = this.api.getEndpoints();
                
                container.innerHTML = endpoints.map(ep => `
                    <div class="flex items-center justify-between p-2 border-b border-border-soft">
                        <div>
                            <div class="font-medium">${ep.name}</div>
                            <div class="text-sm text-fg-2">${ep.url}</div>
                        </div>
                        <button class="btn btn-sm" data-endpoint="${ep.id}" onclick="app.testEndpoint('${ep.id}')">Test</button>
                    </div>
                `).join('');
            }
            
            async testEndpoint(id) {
                const endpoint = this.api.endpoints.get(id);
                if (!endpoint) return;
                
                document.getElementById('apiUrl').value = endpoint.url + '/posts';
                document.getElementById('apiMethod').value = 'GET';
                
                this.updateStatusBar(`Testing ${endpoint.name}...`);
                await this.sendApiRequest();
            }
            
            async sendApiRequest() {
                const url = document.getElementById('apiUrl').value;
                const method = document.getElementById('apiMethod').value;
                const headersText = document.getElementById('apiHeaders').value;
                const bodyText = document.getElementById('apiBody').value;
                
                let headers = {};
                if (headersText.trim()) {
                    headersText.split('\n').forEach(line => {
                        const [key, ...value] = line.split(':');
                        if (key && value) {
                            headers[key.trim()] = value.join(':').trim();
                        }
                    });
                }
                
                let body = null;
                if (bodyText.trim() && method !== 'GET') {
                    try {
                        body = JSON.parse(bodyText);
                    } catch (e) {
                        body = bodyText;
                    }
                }
                
                this.updateStatusBar('Sending request...');
                const result = await this.api.request(url, method, headers, body);
                
                const responseElement = document.getElementById('apiResponse');
                responseElement.textContent = JSON.stringify(result, null, 2);
                responseElement.style.color = result.error ? 'var(--danger)' : 'var(--success)';
                
                this.updateStatusBar(`Request completed in ${result.time || 0}ms`);
            }
            
            showSettingsModal() {
                // Load current settings into form
                document.getElementById('themeSelect').value = this.settings.theme;
                document.getElementById('darkModeToggle').checked = this.settings.darkMode;
                document.getElementById('animationsToggle').checked = this.settings.animations;
                document.getElementById('storageLimit').value = this.settings.storageLimit;
                document.getElementById('autoCompressionToggle').checked = this.settings.autoCompression;
                document.getElementById('backupInterval').value = this.settings.backupInterval;
                document.getElementById('apiTimeout').value = this.settings.apiTimeout;
                document.getElementById('corsToggle').checked = this.settings.cors;
                document.getElementById('cacheToggle').checked = this.settings.cache;
                
                this.showModal('settingsModal');
            }
            
            saveSettingsFromModal() {
                this.settings = {
                    theme: document.getElementById('themeSelect').value,
                    darkMode: document.getElementById('darkModeToggle').checked,
                    animations: document.getElementById('animationsToggle').checked,
                    storageLimit: parseInt(document.getElementById('storageLimit').value),
                    autoCompression: document.getElementById('autoCompressionToggle').checked,
                    backupInterval: parseInt(document.getElementById('backupInterval').value),
                    apiTimeout: parseInt(document.getElementById('apiTimeout').value),
                    cors: document.getElementById('corsToggle').checked,
                    cache: document.getElementById('cacheToggle').checked
                };
                
                this.saveSettings();
                this.hideModal('settingsModal');
                this.updateStatusBar('Settings saved');
            }
            
            toggleSidebar() {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.getElementById('sidebarOverlay');
                
                if (window.innerWidth <= 1024) {
                    sidebar.classList.toggle('show');
                    overlay.classList.toggle('show');
                } else {
                    // On desktop, just collapse
                    const isCollapsed = sidebar.style.width === '60px';
                    sidebar.style.width = isCollapsed ? 'var(--sidebar-width)' : '60px';
                    document.getElementById('collapseSidebar').textContent = isCollapsed ? '¬´' : '¬ª';
                }
            }
            
            showContextMenu(e, target) {
                const menu = document.getElementById('contextMenu');
                menu.style.left = e.pageX + 'px';
                menu.style.top = e.pageY + 'px';
                menu.classList.add('show');
                menu.dataset.target = target.dataset.id;
                
                // Add click handlers
                menu.querySelectorAll('.context-item').forEach(item => {
                    item.onclick = () => {
                        const action = item.dataset.action;
                        const tapeId = menu.dataset.target;
                        this.handleContextAction(action, tapeId);
                        this.hideContextMenu();
                    };
                });
            }
            
            hideContextMenu() {
                document.getElementById('contextMenu').classList.remove('show');
            }
            
            handleContextAction(action, tapeId) {
                const tape = this.db.getTape(tapeId);
                if (!tape) return;
                
                switch (action) {
                    case 'open':
                        this.openTape(tapeId);
                        break;
                    case 'edit':
                        this.openTape(tapeId);
                        break;
                    case 'compress':
                        this.db.compressTape(tapeId);
                        this.loadTapes();
                        this.updateStatusBar(`Compressed: ${tape.name}`);
                        break;
                    case 'decompress':
                        this.db.decompressTape(tapeId);
                        this.loadTapes();
                        this.updateStatusBar(`Decompressed: ${tape.name}`);
                        break;
                    case 'delete':
                        if (confirm(`Delete tape "${tape.name}"?`)) {
                            this.db.deleteTape(tapeId);
                            this.loadTapes();
                            this.updateDashboard();
                            this.updateStatusBar(`Deleted: ${tape.name}`);
                        }
                        break;
                }
            }
            
            showModal(modalId) {
                document.getElementById(modalId).classList.add('show');
            }
            
            hideModal(modalId) {
                document.getElementById(modalId).classList.remove('show');
            }
            
            performSearch(query) {
                if (query.startsWith('http://') || query.startsWith('https://')) {
                    // Open URL in new tab
                    window.open(query, '_blank');
                    this.updateStatusBar(`Opening: ${query}`);
                } else if (query.trim()) {
                    // Search in tapes
                    this.switchView('tapes');
                    document.getElementById('tapeSearch').value = query;
                    this.searchTapes();
                    this.updateStatusBar(`Searching for: ${query}`);
                }
            }
            
            updateStatusBar(message) {
                const element = document.getElementById('statusMessage');
                element.textContent = message;
                element.style.opacity = '1';
                
                setTimeout(() => {
                    element.style.opacity = '0.7';
                }, 3000);
            }
            
            startClock() {
                const updateTime = () => {
                    const now = new Date();
                    const timeString = now.toLocaleTimeString([], { 
                        hour: '2-digit', 
                        minute: '2-digit', 
                        second: '2-digit' 
                    });
                    document.getElementById('currentTime').textContent = timeString;
                };
                
                updateTime();
                setInterval(updateTime, 1000);
            }
            
            createSampleTapes() {
                // Create some sample data
                const samples = [
                    {
                        name: 'example.json',
                        content: JSON.stringify({
                            app: 'Black Code Browser',
                            version: '1.0.0',
                            features: ['Tape Storage', 'API Explorer', 'SCXQ2 Compression', 'MX2DB'],
                            author: 'Atomic ‚äó Glyph System'
                        }, null, 2),
                        type: 'json',
                        tags: ['sample', 'config', 'json']
                    },
                    {
                        name: 'config.xml',
                        content: `<?xml version="1.0" encoding="UTF-8"?>
<config>
    <theme>matrix</theme>
    <storage limit="100MB" />
    <apis>
        <api name="jsonplaceholder" url="https://jsonplaceholder.typicode.com" />
        <api name="mockapi" url="https://mockapi.io" />
    </apis>
</config>`,
                        type: 'xml',
                        tags: ['sample', 'config', 'xml']
                    },
                    {
                        name: 'hello.html',
                        content: `<!DOCTYPE html>
<html>
<head>
    <title>Hello World</title>
    <style>
        body { 
            background: #020409; 
            color: #16f2aa; 
            font-family: monospace; 
            padding: 40px; 
        }
        h1 { text-shadow: 0 0 10px #16f2aa; }
    </style>
</head>
<body>
    <h1>Hello from Black Code Browser!</h1>
    <p>This HTML file is stored as a tape in MX2DB.</p>
</body>
</html>`,
                        type: 'html',
                        tags: ['sample', 'html', 'demo']
                    }
                ];
                
                samples.forEach(sample => {
                    this.db.createTape(sample.name, sample.content, sample.type, sample.tags);
                });
                
                this.updateStatusBar('Created sample tapes');
            }
        }
        
        // Initialize the application
        const app = new BlackCodeBrowser();
        window.app = app; // Make available globally for debugging
        
        // Export utility functions
        window.MX2DB = MX2DB;
        window.SCXQ2 = SCXQ2;
        window.APIManager = APIManager;
        
        console.log('Black Code Browser initialized');
        console.log('MX2DB:', app.db);
        console.log('API Manager:', app.api);
        console.log('Settings:', app.settings);
    </script>
</body>
</html>