{
  "name": "BLACK CODE BROWSER — ATOMIC ⊗ TAPE CMS ⊗ MX2DB",
  "short_name": "BLACKCODE",
  "version": "1.2.3",
  "start_url": "/",
  "scope": "/",
  "display": "standalone",
  "background_color": "#020409",
  "theme_color": "#16f2aa",
  "description": "Advanced browser system with canvas-based DOM projection, KUHUL security runtime, and atomic CSS compression.",

  "icons": [
    {
      "src": "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'><stop offset='0' stop-color='%2316f2aa'/><stop offset='1' stop-color='%2361e7ff'/></linearGradient></defs><rect x='6' y='6' width='52' height='52' rx='12' fill='rgba(255,255,255,.03)' stroke='rgba(255,255,255,.14)'/><path d='M32 14 L46 32 L32 50 L18 32 Z' fill='url(%23g)'/><path d='M32 20 L40 32 L32 44 L24 32 Z' fill='rgba(0,0,0,.35)'/><circle cx='32' cy='32' r='3.2' fill='%23020409' stroke='rgba(255,255,255,.22)'/></svg>",
      "sizes": "64x64",
      "type": "image/svg+xml"
    },
    {
      "src": "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect width='192' height='192' rx='32' fill='%23020409'/><path d='M96 32 L144 96 L96 160 L48 96 Z' fill='%2316f2aa'/><path d='M96 56 L120 96 L96 136 L72 96 Z' fill='%23020409'/><circle cx='96' cy='96' r='8' fill='%2316f2aa'/></svg>",
      "sizes": "192x192",
      "type": "image/svg+xml"
    }
  ],

  "@atomic_law": "ASX = XCFE = XJSON = KUHUL = AST = ATOMIC_BLOCK",
  "@runtime_binding": {
    "index.html": "DOM_ROOT_FRAME + KUHUL_SECURITY",
    "sw.js": "ROUTER_CACHE_IO_MESH + IDB_SESSION + PROJECTION",
    "manifest.json": "MX2DB_USER_DB + ATOMIC_FOLD + MICRO_AGENTS"
  },

  "mx2db": {
    "version": "1.2.3",
    "storage_limit_bytes": 104857600,

    "users": {
      "primary": {
        "user_id": "local",
        "display_name": "Local User",
        "created": 0,
        "securolink": {
          "mode": "local",
          "pin_policy": { "min_len": 4, "max_len": 12, "tries": 8 }
        }
      }
    },

    "settings": {
      "theme": "matrix",
      "darkMode": true,
      "animations": true,
      "autoCompression": true,
      "compressionLevel": "scxq2",
      "backupIntervalSec": 86400,
      "apiTimeoutMs": 10000,
      "cors": true,
      "cache": true,
      "projectionCache": true,
      "idbSessions": true,
      "piAutoRoute": true,
      "canvasRenderer": "dom-projection"
    },

    "api_endpoints": [
      { "id": "jsonplaceholder", "name": "JSONPlaceholder", "url": "https://jsonplaceholder.typicode.com", "description": "Fake REST API for testing" },
      { "id": "mockapi", "name": "MockAPI", "url": "https://mockapi.io", "description": "Mock API service" },
      { "id": "local", "name": "Local MX2DB", "url": "mx2db://local", "description": "Local tape database" },
      { "id": "sessions", "name": "Sessions API", "url": "mx2db://local/sessions", "description": "IDB session store" },
      { "id": "tabs", "name": "Tabs API", "url": "mx2db://local/tabs", "description": "Tab management" }
    ],

    "tapes": [],
    "activity": []
  },

  "micro_agents": {
    "version": "1.0.0",
    "enabled": true,
    "agents": {
      "compression": {
        "id": "scxq2",
        "type": "transform",
        "description": "SCXQ2 field-aware compression for tapes",
        "field_map": {
          "id": "0x01", "name": "0x02", "type": "0x03", "content": "0x04",
          "tags": "0x05", "created": "0x06", "modified": "0x07", "size": "0x08",
          "compression": "0x09", "version": "0x0A", "author": "0x0B", "meta": "0x0C"
        },
        "content_threshold": 100,
        "encoding": "base64"
      },
      "projection": {
        "id": "dom-canvas",
        "type": "renderer",
        "description": "DOM to Canvas projection for CORS bypass",
        "modes": ["html-canvas", "json-view", "text-view", "image-canvas"],
        "cache_ttl_ms": 300000
      },
      "pi_router": {
        "id": "pi-media",
        "type": "router",
        "description": "π video/audio/image auto-routing",
        "routes": {
          "video": { "renderer": "canvas-video", "controls": true },
          "stream": { "renderer": "canvas-stream", "live": true },
          "image": { "renderer": "canvas-image", "zoomable": true },
          "audio": { "renderer": "canvas-audio", "waveform": true }
        }
      },
      "session_store": {
        "id": "idb-sessions",
        "type": "storage",
        "description": "IndexedDB session persistence (replaces localStorage)",
        "stores": ["sessions", "tabs", "projectionCache"],
        "indexes": {
          "sessions": ["url", "updatedAt"],
          "tabs": ["order", "active"]
        }
      },
      "tab_manager": {
        "id": "tab-ctrl",
        "type": "controller",
        "description": "Tab close/reorder/activate management",
        "features": ["close", "reorder", "activate", "pin"]
      },
      "tape_io": {
        "id": "tape-export",
        "type": "io",
        "description": "Tape export/import with SCXQ2 compression",
        "formats": ["json", "scxq2"],
        "operations": ["exportAll", "exportSingle", "import", "merge"]
      }
    }
  },

  "kuhul": {
    "version": "1.0.0",
    "security": {
      "sandbox": true,
      "capabilities_default": {
        "dom_read": false,
        "dom_write": false,
        "net_fetch": true,
        "storage": true,
        "js_run": false,
        "console": true
      },
      "harden": ["eval", "Function", "fileSystem"],
      "rate_limit": { "window_ms": 1000, "max_requests": 120 }
    },
    "devices": ["log", "time", "dom", "svg", "store", "net", "canvasTabs", "sandboxJS"],
    "modules": ["pi-mini", "pi-renderer", "dom-projection"]
  },

  "atomic": {
    "version": "5.0.0",
    "compression": {
      "enabled": true,
      "method": "scxq2",
      "level": "balanced"
    },
    "fold": {
      "atomic.css": ":root{--bg-0:#020409;--bg-1:#050912;--bg-2:#071022;--bg-3:#0a1530;--panel:rgba(255,255,255,.045);--panel2:rgba(255,255,255,.06);--panel3:rgba(255,255,255,.08);--border:rgba(255,255,255,.14);--border-soft:rgba(255,255,255,.09);--border-strong:rgba(255,255,255,.22);--fg-0:#eafff8;--fg-1:rgba(234,255,248,.78);--fg-2:rgba(234,255,248,.56);--fg-3:rgba(234,255,248,.38);--accent:#16f2aa;--accent2:#61e7ff;--accent3:#a78bfa;--accent-soft:rgba(22,242,170,.14);--accent-glow:rgba(22,242,170,.35);--hazard:#ffb300;--hazard-soft:rgba(255,179,0,.14);--danger:#ff6b6b;--danger-soft:rgba(255,107,107,.14);--success:#00d9a6;--success-soft:rgba(0,217,166,.14);--warning:#ffb300;--info:#61e7ff;--r-sm:8px;--r-md:12px;--r-lg:16px;--r-xl:20px;--r-2xl:24px;--r-pill:999px;--sp-xs:4px;--sp-sm:8px;--sp-md:16px;--sp-lg:24px;--sp-xl:32px;--sp-2xl:48px;--trans-fast:.15s ease;--trans-normal:.3s ease;--trans-slow:.5s ease;--shadow-sm:0 2px 8px rgba(0,0,0,.3);--shadow-md:0 8px 24px rgba(0,0,0,.4);--shadow-lg:0 16px 48px rgba(0,0,0,.5);--shadow-glow:0 0 40px var(--accent-glow);--font-sans:system-ui,-apple-system,BlinkMacSystemFont,\"Inter\",sans-serif;--font-mono:\"JetBrains Mono\",\"Fira Code\",monospace}*{margin:0;padding:0;box-sizing:border-box}html,body{height:100%;background:var(--bg-0);color:var(--fg-0);font-family:var(--font-sans);color-scheme:dark}.asx-flex{display:flex}.asx-col{flex-direction:column}.asx-row{flex-direction:row}.asx-center{align-items:center;justify-content:center}.asx-between{justify-content:space-between}.asx-wrap{flex-wrap:wrap}.asx-gap-xs{gap:var(--sp-xs)}.asx-gap-sm{gap:var(--sp-sm)}.asx-gap-md{gap:var(--sp-md)}.asx-gap-lg{gap:var(--sp-lg)}.asx-card{background:var(--panel);border:1px solid var(--border);border-radius:var(--r-lg);padding:var(--sp-md);backdrop-filter:blur(12px)}.asx-card:hover{border-color:var(--border-strong);box-shadow:var(--shadow-md)}.asx-panel{background:linear-gradient(145deg,var(--bg-1),var(--bg-2));border:1px solid var(--border);border-radius:var(--r-xl);padding:var(--sp-lg);box-shadow:var(--shadow-md)}.asx-btn{display:inline-flex;align-items:center;gap:var(--sp-xs);padding:var(--sp-sm) var(--sp-md);border-radius:var(--r-pill);border:1px solid var(--border);background:var(--panel);color:var(--fg-1);font-size:13px;cursor:pointer;transition:all var(--trans-fast);white-space:nowrap}.asx-btn:hover{background:var(--panel2);border-color:var(--border-strong);transform:translateY(-1px);box-shadow:var(--shadow-sm)}.asx-btn-primary{background:linear-gradient(135deg,var(--accent-soft),transparent);border-color:var(--accent);color:var(--accent);box-shadow:var(--shadow-glow)}.asx-btn-primary:hover{background:var(--accent);color:var(--bg-0)}.asx-btn-danger{border-color:var(--danger);color:var(--danger)}.asx-btn-danger:hover{background:var(--danger);color:var(--fg-0)}.asx-input{padding:var(--sp-sm) var(--sp-md);border-radius:var(--r-md);border:1px solid var(--border);background:var(--bg-1);color:var(--fg-0);font-size:14px;transition:all var(--trans-fast)}.asx-input:focus{outline:none;border-color:var(--accent);box-shadow:0 0 16px var(--accent-soft)}.asx-tag{display:inline-flex;padding:2px 8px;border-radius:var(--r-pill);border:1px solid var(--border-soft);background:var(--panel);font-size:11px;color:var(--fg-2)}.asx-badge{padding:4px 10px;border-radius:var(--r-pill);font-size:11px;font-weight:600}.asx-badge-success{background:var(--success-soft);color:var(--success);border:1px solid var(--success)}.asx-badge-warning{background:var(--hazard-soft);color:var(--hazard);border:1px solid var(--hazard)}.asx-badge-danger{background:var(--danger-soft);color:var(--danger);border:1px solid var(--danger)}.asx-modal{position:fixed;inset:0;background:rgba(2,4,9,.9);backdrop-filter:blur(20px);display:none;align-items:center;justify-content:center;z-index:9999}.asx-modal.active{display:flex}.asx-modal-content{background:linear-gradient(145deg,var(--bg-1),var(--bg-2));border:1px solid var(--border);border-radius:var(--r-2xl);padding:var(--sp-xl);max-width:600px;width:90%;max-height:80vh;overflow-y:auto;box-shadow:var(--shadow-lg),var(--shadow-glow)}.asx-modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--sp-lg);padding-bottom:var(--sp-md);border-bottom:1px solid var(--border-soft)}.asx-modal-title{font-size:18px;font-weight:600;color:var(--fg-0)}.asx-modal-close{width:32px;height:32px;border-radius:50%;border:1px solid var(--border);background:transparent;color:var(--fg-2);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all var(--trans-fast)}.asx-modal-close:hover{border-color:var(--danger);color:var(--danger);background:var(--danger-soft)}.asx-tabs{display:flex;gap:2px;padding:3px;border-radius:var(--r-md);background:var(--panel);border:1px solid var(--border)}.asx-tab{flex:1;padding:var(--sp-sm);border-radius:var(--r-sm);border:none;background:transparent;color:var(--fg-2);font-size:12px;cursor:pointer;text-align:center;transition:all var(--trans-fast)}.asx-tab.active{background:var(--bg-1);color:var(--fg-0);box-shadow:0 0 0 1px var(--border-strong)}.asx-tab:hover:not(.active){color:var(--fg-1)}.asx-canvas{background:var(--bg-0);border:1px solid var(--border);border-radius:var(--r-lg);overflow:hidden;position:relative}.asx-canvas-header{padding:var(--sp-sm) var(--sp-md);background:var(--panel);border-bottom:1px solid var(--border);display:flex;align-items:center;gap:var(--sp-sm)}.asx-canvas-body{min-height:200px;overflow:auto}.asx-canvas-tabs{display:flex;gap:2px;overflow-x:auto;background:var(--bg-2);padding:4px}.asx-canvas-tab{display:flex;align-items:center;gap:var(--sp-xs);padding:6px 12px;border-radius:var(--r-sm);background:var(--panel);border:1px solid transparent;font-size:12px;color:var(--fg-2);cursor:pointer;white-space:nowrap;max-width:180px;overflow:hidden}.asx-canvas-tab.active{background:var(--bg-1);border-color:var(--border);color:var(--fg-0)}.asx-canvas-tab-close{width:16px;height:16px;border-radius:50%;border:none;background:transparent;color:var(--fg-3);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:10px;margin-left:auto;opacity:0;transition:all var(--trans-fast)}.asx-canvas-tab:hover .asx-canvas-tab-close{opacity:1}.asx-canvas-tab-close:hover{background:var(--danger-soft);color:var(--danger)}.asx-grid{display:grid}.asx-grid-2{grid-template-columns:repeat(2,1fr)}.asx-grid-3{grid-template-columns:repeat(3,1fr)}.asx-grid-4{grid-template-columns:repeat(4,1fr)}.asx-grid-auto{grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.asx-text-xs{font-size:11px}.asx-text-sm{font-size:13px}.asx-text-md{font-size:14px}.asx-text-lg{font-size:16px}.asx-text-xl{font-size:20px}.asx-text-muted{color:var(--fg-3)}.asx-text-secondary{color:var(--fg-2)}.asx-text-accent{color:var(--accent)}.asx-mt-xs{margin-top:var(--sp-xs)}.asx-mt-sm{margin-top:var(--sp-sm)}.asx-mt-md{margin-top:var(--sp-md)}.asx-mt-lg{margin-top:var(--sp-lg)}.asx-mb-xs{margin-bottom:var(--sp-xs)}.asx-mb-sm{margin-bottom:var(--sp-sm)}.asx-mb-md{margin-bottom:var(--sp-md)}.asx-mb-lg{margin-bottom:var(--sp-lg)}.asx-p-sm{padding:var(--sp-sm)}.asx-p-md{padding:var(--sp-md)}.asx-p-lg{padding:var(--sp-lg)}.asx-hidden{display:none!important}.asx-overflow-auto{overflow:auto}.asx-overflow-hidden{overflow:hidden}.asx-relative{position:relative}.asx-absolute{position:absolute}.asx-fixed{position:fixed}.asx-inset-0{inset:0}.asx-w-full{width:100%}.asx-h-full{height:100%}.asx-min-h-0{min-height:0}.asx-flex-1{flex:1}.asx-shrink-0{flex-shrink:0}.asx-mono{font-family:var(--font-mono)}.asx-truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.asx-glow{box-shadow:var(--shadow-glow)}.asx-blur{backdrop-filter:blur(12px)}@keyframes asx-pulse{0%,100%{opacity:1}50%{opacity:.5}}@keyframes asx-spin{to{transform:rotate(360deg)}}.asx-animate-pulse{animation:asx-pulse 2s ease-in-out infinite}.asx-animate-spin{animation:asx-spin 1s linear infinite}",

      "atomic.xjson": "{\n  \"@id\": \"atomic.xjson\",\n  \"@role\": \"config\",\n  \"@version\": \"1.2.3\",\n  \"@securolink\": {\n    \"@enabled\": true,\n    \"@mode\": \"pin+webauthn_optional\"\n  },\n  \"@mesh\": {\n    \"@enabled\": true,\n    \"@channels\": [\"broadcast\", \"direct\", \"tape\", \"projection\"]\n  },\n  \"@routes\": {\n    \"/atomic.css\": \"virtual\",\n    \"/atomic.xjson\": \"virtual\",\n    \"/atomic.khl\": \"virtual\",\n    \"/atomic.html\": \"virtual\",\n    \"/π/*\": \"projection\"\n  },\n  \"@micro_agents\": {\n    \"scxq2\": { \"type\": \"compression\", \"active\": true },\n    \"dom-canvas\": { \"type\": \"projection\", \"active\": true },\n    \"pi-media\": { \"type\": \"router\", \"active\": true },\n    \"idb-sessions\": { \"type\": \"storage\", \"active\": true },\n    \"tab-ctrl\": { \"type\": \"controller\", \"active\": true },\n    \"tape-export\": { \"type\": \"io\", \"active\": true }\n  }\n}",

      "atomic.khl": "⟁KHL v1.2.3\n⟁id: atomic.khl\n⟁role: execution_engine\n⟁note: served virtually by sw.js; kernel-like blocks live here\n\n⟁DEVICES\n  ⟁log: console.info, console.warn, console.error\n  ⟁time: Date.now, performance.now, sleep\n  ⟁dom: querySelector, getElementById, setText, setHTML\n  ⟁svg: path, rect, text, circle, clear\n  ⟁store: IDB.get, IDB.put, IDB.del, IDB.all\n  ⟁net: fetch (proxied), API_SEND\n  ⟁canvasTabs: open, close, focus, list\n  ⟁sandboxJS: post (registry-only)\n\n⟁OPS\n  ⟁op dom.render\n  ⟁op dom.project [url] → canvas\n  ⟁op mx2db.put [store, value]\n  ⟁op mx2db.get [store, key]\n  ⟁op scxq2.compress [content] → base64\n  ⟁op scxq2.decompress [base64] → content\n  ⟁op tape.export [id?, compress?] → bundle\n  ⟁op tape.import [data, merge?]\n  ⟁op tab.create [url, opts]\n  ⟁op tab.close [id]\n  ⟁op tab.reorder [id, order]\n  ⟁op session.create [url, caps]\n  ⟁op session.update [id, updates]\n  ⟁op π.route [url, type] → renderer\n  ⟁op mesh.broadcast [channel, data]\n\n⟁SECURITY\n  ⟁caps: dom_read, dom_write, net_fetch, storage, js_run, console\n  ⟁harden: eval=disabled, Function=disabled, fileSystem=blocked\n  ⟁rate_limit: 120/1000ms\n  ⟁sandbox: allow-scripts, allow-forms (inner iframe only)\n\n⟁MODULES\n  ⟁pi-mini: SVG waveform renderer\n  ⟁pi-renderer: Full π video/audio canvas\n  ⟁dom-projection: HTTP → Canvas DOM transfer",

      "atomic.html": "<!DOCTYPE html>\n<html lang=\"en\" data-theme=\"dark\">\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n  <title>ATOMIC Canvas</title>\n  <link rel=\"stylesheet\" href=\"/atomic.css\">\n</head>\n<body class=\"asx-flex asx-col asx-h-full\">\n  <div id=\"kuhul-root\" class=\"asx-flex-1 asx-flex asx-col asx-min-h-0\">\n    <div class=\"asx-canvas-header\">\n      <span class=\"asx-text-accent\">⟁</span>\n      <span>ATOMIC Canvas</span>\n    </div>\n    <div class=\"asx-canvas-body asx-flex-1 asx-p-md asx-overflow-auto\">\n      <svg id=\"kuhul_svg_root\" width=\"100%\" height=\"200\" class=\"asx-mb-md\"></svg>\n      <div id=\"kuhul_content\"></div>\n    </div>\n  </div>\n</body>\n</html>"
    }
  }
}
